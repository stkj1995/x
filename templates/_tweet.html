<article class="post" mix-fade-in="5000">
  <img
    src="{{ url_for('static', filename='images/'~(tweet.user_avatar_path if tweet.user_avatar_path else 'unknown.jpg')) }}"
    alt="Profile Picture"
    class="w-8 h-8 rounded-full"
  />
  <div class="post-content">
    <div class="post-header">
      <span class="name">
        {{ tweet.user_first_name }} {{ tweet.user_last_name }}
      </span>
      <span class="handle">@{{ tweet.user_username }}</span> Â·
      <span class="time">1d</span>
    </div>
    <p class="text">{{ tweet.post_message }}</p>
    {% if tweet.post_image_path: %}
    <img
      src="{{ url_for('static', filename='images/' ~ tweet.post_image_path) }}"
      alt="Post image"
      class="w-80"
    />
    {% endif %}

    <div class="post-actions">
      <span class="action" data-post-id="{{ tweet.post_id }}"
        ><i class="fa-regular fa-comment"></i> {{ tweet.comment_count or 0 }}
      </span>
      <span class="action"><i class="fa-solid fa-retweet"></i> 5</span>
      {% include "___button_like_tweet.html" %}
      <span class="action"><i class="fa-solid fa-chart-simple"></i> 230</span>
      <span class="action"><i class="fa-solid fa-share"></i></span>
    </div>
    <!-- comment section form - should make it a micro component later so that it doesn't reload this whole page -->
    <!-- mix-post makes an AJAX request instead of a full page submit... I guess? -->

    <div class="comment-section">
      <form
        action="{{ url_for('api_create_comment', post_fk=tweet.post_pk) }}"
        method="POST"
      >
        <textarea
          name="comment_text"
          placeholder="Write a comment..."
          required
          class="w-full p-2 border rounded"
        ></textarea>
        <button
          class="x-dialog__btn"
          mix-default="Post comment"
          mix-await="Posting..."
          type="submit"
        >
          Post comment
        </button>
      </form>
    </div>

    <!-- end of comment section form -->
  </div>
</article>
